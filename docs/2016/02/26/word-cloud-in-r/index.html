<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Word Cloud in R &middot; Hippocamplus
    
  </title>

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113785126-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    
    gtag('config', "UA-113785126-1");
  </script>
  
  
  <link rel="stylesheet" href="../../../../css/poole.css">
  <link rel="stylesheet" href="../../../../css/syntax.css">
  <link rel="stylesheet" href="../../../../css/lanyon.css">
  <link rel="stylesheet" href="../../../../css/github.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="../../../../fa/css/font-awesome.min.css">
  
  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../assets/hippoPlus-icon.png">
  <link rel="shortcut icon" href="../../../../assets/hippoPlus-icon.png">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../atom.xml">
</head>

  
  <body>

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A place to gather useful information I keep on forgetting.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="../../../../">Home</a>
    <a class="sidebar-nav-item " href="../../../../post">Posts</a>

    
    
      
        <a class="sidebar-nav-item " href="../../../../emacs/">Emacs</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../latex/">LaTeX</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../markdown/">Markdown</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../math/stats/">Math/Stats</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../python/">Python</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../r/">R</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../shell/">Shell</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../internet/">Internet</a>
      
    
      
        <a class="sidebar-nav-item " href="../../../../about/">About</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
    
  </nav>

  <div class="sidebar-item">
  </div>
  
  <div class="sidebar-item">
    <div><a href="../../../../index.xml"><i class="fa fa-rss-square" aria-hidden="true"></i> RSS</a></div>
    <div><a href="https://twitter.com/JMonlong"><i class="fa fa-twitter" aria-hidden="true"></i> @JMonlong</a></div>
    <p>&copy; 2018 Jean Monlong. All rights reserved.</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="../../../../" title="Home">Hippocamplus</a>
            <small>My Second Memory</small>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="post">
  <h1 class="post-title">Word Cloud in R</h1>
  <span class="post-date">Feb 26 2016
  
  
  
  
  
  <a href='../../../../tags/r/' class='label'>R</a>
  
  <a href='../../../../tags/plot/' class='label'>plot</a>
  
  
  
  </span>
  <p>The <a href="https://cran.r-project.org/web/packages/wordcloud/index.html"><code>wordcloud</code> package</a> is available on CRAN.</p>
<div id="fake-words" class="section level2">
<h2>Fake words</h2>
<p>I create fake words to see a bit how the command is working.</p>
<pre class="r"><code>library(wordcloud)
createWords &lt;- function(w.l = 3) paste(sample(letters, 
    w.l, TRUE), collapse = &quot;&quot;)
words = sapply(1:200, function(e) createWords(runif(1, 
    3, 10)))
freq = c(sample(1:30, 190, T), sample(30:150, 10, T))
freq = freq/sum(freq)
wordcloud(words, freq)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-1.png" width="672" /></p>
<pre class="r"><code>## Big words in the center
wordcloud(words, freq, random.order = FALSE)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-2.png" width="672" /></p>
<pre class="r"><code>## Max word number
wordcloud(words, freq, max.words = 50)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-3.png" width="672" /></p>
<pre class="r"><code>## Rotation: proportion of 90 degree
wordcloud(words, freq, rot.per = 0.01)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-4.png" width="672" /></p>
<pre class="r"><code>## Color the most frequent words
wordcloud(words, freq, colors = c(&quot;black&quot;, &quot;blue&quot;, 
    &quot;red&quot;), random.order = FALSE)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-5.png" width="672" /></p>
<pre class="r"><code>## Color for each word
wordcloud(words, freq, colors = sample(c(&quot;black&quot;, &quot;blue&quot;, 
    &quot;red&quot;), length(words), TRUE), random.order = FALSE, 
    ordered.colors = TRUE)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/example-6.png" width="672" /></p>
</div>
<div id="command-history" class="section level2">
<h2>Command history</h2>
<p>I retrieved the commands from my <code>.bash_history</code> files (laptop and HPCs) and I want to make a word cloud showing the commands I use the most.</p>
<pre class="r"><code>library(dplyr)
library(RColorBrewer)
cmds = read.table(&quot;../../data/bash-commands.tsv.gz&quot;, 
    as.is = TRUE)
colnames(cmds) = c(&quot;cmd&quot;, &quot;machine&quot;)</code></pre>
<div id="laptop" class="section level3">
<h3>Laptop</h3>
<p>By default the maximum history size was set to 500 commands so I don’t have the full set of commands, just the last 500. (I increased the limit, see you in 10,000 commands.)</p>
<pre class="r"><code>cmds.s = cmds %&gt;% filter(machine == &quot;laptop&quot;, !grepl(&quot;=&quot;, 
    cmd), !grepl(&quot;\\.&quot;, cmd), !grepl(&quot;/&quot;, cmd)) %&gt;% 
    group_by(cmd) %&gt;% summarize(n = n()) %&gt;% mutate(freq = n/sum(n))
wordcloud(cmds.s$cmd, cmds.s$freq, colors = c(&quot;black&quot;, 
    brewer.pal(8, &quot;Set1&quot;)), random.order = FALSE, scale = c(10, 
    1), title = &quot;All&quot;)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/cmdlt-1.png" width="672" /></p>
</div>
<div id="hpc" class="section level3">
<h3>HPC</h3>
<pre class="r"><code>cmds.s = cmds %&gt;% filter(machine != &quot;laptop&quot;, !grepl(&quot;=&quot;, 
    cmd), !grepl(&quot;\\.&quot;, cmd), !grepl(&quot;/&quot;, cmd), !grepl(&quot;\\$&quot;, 
    cmd), !grepl(&quot;\\:&quot;, cmd)) %&gt;% group_by(cmd) %&gt;% 
    summarize(n = n()) %&gt;% mutate(freq = n/sum(n))
wordcloud(cmds.s$cmd, cmds.s$freq, colors = c(&quot;black&quot;, 
    brewer.pal(8, &quot;Set1&quot;)), random.order = FALSE, scale = c(10, 
    1), title = &quot;All&quot;, min.freq = 1)</code></pre>
<p><img src="../../../../post/2016-02-26-wordcloud_files/figure-html/cmdhpc-1.png" width="672" /></p>
<p>Good see the usual suspects <code>ls</code> and <code>cd</code> and their “typo” versions <code>;s</code>/<code>ks</code>/<code>ld</code> and <code>xs</code>.</p>
</div>
</div>

</div>

      </div>
    </div>

    
    

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src="../../../../assets/highlight.min.js"></script>
    <script src="../../../../assets/r.min.js"></script>
    
    <script>
      hljs.configure({languages: ['r']});
      hljs.initHighlightingOnLoad();
    </script>

    <script src="//yihui.name/js/math-code.js"></script>
    <script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    
  </body>
</html>

